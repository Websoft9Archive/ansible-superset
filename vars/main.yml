# global
region: "0"

common_install_docker: True
docker_install: False

nginx_certbot: true
nginx_appname: "superset"
nginx_vhost_mode: "reverse"
nginx_reverse_proxy_port: "8088"

# docker
docker_applications:
  - pgadmin


init_docker:
  pgadmin:
    admin_username: user@domain.com
    admin_password: "SuperSecret"
    service_after: "docker.service"
    compose_path: "/data/apps/pgadmin/docker-compose.yml"
    compose_commands:
      - sudo sed -i "s/SuperSecret/$new_password/g" /data/apps/pgadmin/docker-compose.yml
  superset:
    admin_username: admin  
    admin_password: "admin"
    db: postgresql
    db_name: superset
    db_username: superset
    db_password: "superset"
    service_after: "docker.service"
    compose_path: "/data/wwwroot/superset/docker-compose-production.yml" 
    compose_commands: 
      - sudo sed -i "s/DATABASE_PASSWORD=superset/DATABASE_PASSWORD=$new_password/g" /data/wwwroot/superset/docker/.env
      - sudo sed -i "s/POSTGRES_PASSWORD=superset/POSTGRES_PASSWORD=$new_password/g" /data/wwwroot/superset/docker/.env
      - sudo sed -i "s/DATABASE_PASSWORD=superset/DATABASE_PASSWORD=$new_password/g" /data/wwwroot/superset/docker/.env-non-dev
      - sudo sed -i "s/POSTGRES_PASSWORD=superset/POSTGRES_PASSWORD=$new_password/g" /data/wwwroot/superset/docker/.env-non-dev
      - sudo sed -i 's/ADMIN_PASSWORD="admin"/ADMIN_PASSWORD="'$new_password'"/g' /data/wwwroot/superset/docker/docker-init.sh
    volumes:
      - /data/wwwroot/superset/postgresql
      - /data/wwwroot/superset/redis
      - /data/wwwroot/superset/superset_home
 
